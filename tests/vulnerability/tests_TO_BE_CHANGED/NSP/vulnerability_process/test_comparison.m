
clc; clear all; close all
%% INPUTS
an_type = [{'RGM'},{'SPO2IDA'},{'DF'}];
out_type=[{'EDP-RD beta_c=0'},{'EDP-RD beta_c=0.25'},{'RD beta_c=0'},{'RD beta_c=0.25'}];
iml = linspace(0.01,2);
plotflag = 1;

%% MULTIPLE BUILDINGS CURVE
LR = csvread(horzcat('./results/vulnerability_process.csv'), 1, 0);
LRm = csvread(horzcat('./results/vulnerability_process_matlab.csv'));
figure
plot(LR(:,1),LR(:,2),'Linestyle','--','LineWidth', 2)
hold on
plot(LRm(:,1),LRm(:,2))
title('Multiple buildings LR');
legend1=legend('matlab EDP-RD beta_c=0.25','RMTK EDP-RD beta_c=0.25');

set(legend1,'Location','Southeast','FontSize',6);
ylabel('Loss Ratio','FontSize',9);
xlabel('Sa(T) [g]','FontSize',9);
set(gca,'FontSize',7);
legend boxoff
if plotflag
    xSize = 10; ySize = 6;
    xLeft = (21-xSize)/2; yTop = (30-ySize)/2;
    set(gcf,'PaperUnits','centimeters');
    set(gcf,'PaperPosition',[xLeft yTop xSize ySize])
    set(gcf,'Position',[5 5 xSize*10 ySize*10])
    fnam=('Multiple_blgs.fig');
    fpat=horzcat('./results/');

    saveas(gcf,[fpat,filesep,fnam],'fig')
    fnam='Multiple_blgs.eps';
    fpat=horzcat('./results/',fnam);
    print('-depsc2',fpat)
end

%% SINGLE BUILDING CURVE WITH ALL POSSIBLE OPTIONS

for i=1:length(an_type)
    LR = csvread(horzcat('./results/',an_type{i},'_vulnerability.csv'), 1, 1);
    LRm = csvread(horzcat('./results/',an_type{i},'_vulnerability_matlab.csv'));
    col = 2:2:size(LR,2);
    figure
    plot(LRm(1,:),LRm(2:5,:));
    co = get(gca,'ColorOrder'); % Initial
    set(gca, 'ColorOrder', [0 1 0; 1 0 0; 0 0 1; 0 0 0], 'NextPlot', 'replacechildren');
    co = get(gca,'ColorOrder'); % Verify it changed
    plot(LRm(1,:),LRm(2:5,:), 'LineWidth', 1,'DisplayName','-matlab');
    hold on
    plot(LR(:,1),LR(:,col),'Linestyle','--','LineWidth', 2)
    title(an_type{i});
    legend1=legend('matlab EDP-RD beta_c=0','matlab EDP-RD beta_c=0.25',...
        'matlab RD beta_c=0','matlab RD beta_c=0.25','RMTK EDP-RD beta_c=0',...
        'RMTK EDP-RD beta_c=0.25','RMTK RD beta_c=0','RMTK RD beta_c=0.25');
    
    set(legend1,'Location','Southeast','FontSize',6);
    ylabel('Loss Ratio','FontSize',9);
    xlabel('Sa(T) [g]','FontSize',9);
    set(gca,'FontSize',7);
    legend boxoff
    if plotflag
        xSize = 10; ySize = 6;
        xLeft = (21-xSize)/2; yTop = (30-ySize)/2;
        set(gcf,'PaperUnits','centimeters');
        set(gcf,'PaperPosition',[xLeft yTop xSize ySize])
        set(gcf,'Position',[5 5 xSize*10 ySize*10])
        fnam=(horzcat(an_type{i},'.fig'));
        fpat=horzcat('./results/');

        saveas(gcf,[fpat,filesep,fnam],'fig')
        fnam=horzcat(an_type{i},'.eps');
        fpat=horzcat('./results/',fnam);
        print('-depsc2',fpat)
    end
    
end