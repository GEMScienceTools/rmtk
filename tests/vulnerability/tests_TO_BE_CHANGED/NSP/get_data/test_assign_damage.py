# -*- coding: utf-8 -*-
# <nbformat>3.0</nbformat>

# <codecell>

"""
Created on Thu May 29 08:32:34 2014

@author: chiaracasotto
"""
import numpy as np
import csv
import os
from rmtk.vulnerability.NSP.assign_damage import assign_damage
cd = os.getcwd()

input1 = cd+'/inputs/pushover.csv' # storeys height and displacements at story levels starting from level 0

EDPlim = [[0.01,	0.02, 0.03,	0.04, 0.05]]
H = [[6.9, 3.96]]
noStorey = [[len(H)]]
noBlg = 1

# <codecell>

# Import displacements
with open(input1, 'rb') as f:
    reader = csv.reader(f)
    newlist = [row for row in reader]
tmp, disp = [],[]
tmp.append([[] for i in range(0,len(newlist))]); tmp = tmp[0]
disp.append([[] for i in range(0,noBlg)]); 
disp = disp[0]
for i in range(1,len(newlist)):
    for ele in newlist[i][2:]:
        if ele is not '':
            tmp[i-1].append(ele)
    j = int((i-1)/noStorey[0])
    disp[j].append(abs(np.array(tmp[i-1][:],float)))

# <codecell>

[disp_profile, EDP] = assign_damage(EDPlim[0],disp[0],H[0],noStorey[0])

